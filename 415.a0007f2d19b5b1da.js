"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[415],{3415:(R,p,e)=>{e.r(p),e.d(p,{TaskListModule:()=>F});var d=e(4859),u=e(9549),f=e(7392),T=e(4977),C=e(6298),_=e(2510),r=e(7340),g=e(4006),c=e(8845),h=e(5439),k=e(7579),x=e(2722),t=e(4650),y=e(1683),M=e(3079),v=e(6895),O=e(4385),L=e(3238);function Z(o,i){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.AsE(" ",null==n?null:n.first_name," ",null==n?null:n.last_name," ")}}function P(o,i){if(1&o&&t._uU(0),2&o){const n=t.oxw().$implicit;t.hij(" ",null==n?null:n.username," ")}}function A(o,i){if(1&o&&(t.TgZ(0,"mat-option",8),t.YNc(1,Z,2,2,"ng-container",9),t.YNc(2,P,1,1,"ng-template",null,10,t.W1O),t.qZA()),2&o){const n=i.$implicit,s=t.MAs(3);t.Q6J("value",n.id),t.xp6(1),t.Q6J("ngIf",null==n?null:n.first_name)("ngIfElse",s)}}function b(o,i){if(1&o&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).$implicit;t.xp6(1),t.Oqu(n.date)}}function w(o,i){if(1&o&&(t.TgZ(0,"a",25),t._UZ(1,"img",29),t.qZA()),2&o){const n=t.oxw(2).$implicit;t.MGl("href","https://go.xero.com/organisationlogin/default.aspx?shortcode=",n.xero,"",t.LSH)}}function U(o,i){if(1&o&&(t.TgZ(0,"a",25),t._UZ(1,"img",30),t.qZA()),2&o){const n=t.oxw(2).$implicit;t.MGl("href","https://app.dext.com/clients/",n.dext,"/gamma/costs/inbox",t.LSH)}}function I(o,i){if(1&o&&(t.TgZ(0,"a",25),t._UZ(1,"img",31),t.qZA()),2&o){const n=t.oxw(2).$implicit;t.MGl("href","https://find-and-update.company-information.service.gov.uk/company/",n.crn,"",t.LSH)}}function J(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div",18)(2,"div",19)(3,"button",20),t._UZ(4,"mat-icon",21),t.qZA(),t.TgZ(5,"div",22)(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA(),t.YNc(10,b,2,1,"span",23),t.qZA()()(),t.TgZ(11,"div",24),t.NdJ("click",function(s){return s.stopImmediatePropagation()}),t.TgZ(12,"a",25),t._UZ(13,"img",26),t.qZA(),t.YNc(14,w,2,1,"a",27),t.YNc(15,U,2,1,"a",27),t.YNc(16,I,2,1,"a",27),t.qZA()()),2&o){const n=t.oxw().$implicit,s=t.oxw().$implicit,a=t.oxw();t.MT6("flex flex-col border-b overflow-hidden priority_",s.color,"_",n.priority," cursor-pointer list-item"),t.Q6J("@myTrigger",a.state),t.xp6(4),t.Tol("2"!==n.t_status?"text-hint":"text-primary"),t.Q6J("svgIcon","heroicons_outline:check-circle"),t.xp6(3),t.Oqu(n.description),t.xp6(2),t.Oqu(n.accountant),t.xp6(1),t.Q6J("ngIf",n.date),t.xp6(2),t.MGl("href","https://www.morethanaccountants.co.uk/salesflow/admin/v_lead.html?id=",null==n?null:n.client_id,"",t.LSH),t.xp6(2),t.Q6J("ngIf",null==n?null:n.xero),t.xp6(1),t.Q6J("ngIf",null==n?null:n.dext),t.xp6(1),t.Q6J("ngIf",null==n?null:n.crn)}}function S(o,i){if(1&o&&(t.ynx(0),t.YNc(1,J,17,15,"div",17),t.BQk()),2&o){const n=i.$implicit;t.xp6(1),t.Q6J("ngIf",n.description)}}function N(o,i){if(1&o&&(t.TgZ(0,"div",11)(1,"div",12)(2,"h1",13),t._uU(3),t.qZA(),t.TgZ(4,"div",14),t._UZ(5,"mat-icon",15),t.qZA()(),t.YNc(6,S,2,1,"ng-container",16),t.qZA()),2&o){const n=i.$implicit;t.xp6(3),t.Oqu(n.name),t.xp6(2),t.MT6("icon-size-18 opacity-25 text-",n.color,"-800 dark:text-",n.color,"-800"),t.xp6(1),t.Q6J("ngForOf",n.text)}}const $=[{path:"",component:(()=>{class o{constructor(n,s){this._fuseConfirmationService=n,this.taskService=s,this.username=new g.NI,this.users=[],this.taskListArr=[{color:"gray",name:"Setup & Compliance",dataType:c.C.SETUP},{color:"yellow",name:"Bookkeeping",dataType:c.C.BOOK},{color:"orange",name:"VAT",dataType:c.C.VAT},{color:"pink",name:"Annual Accounts",dataType:c.C.ANNUAL},{color:"green",name:"Self Assessment",dataType:c.C.SELF}],this.destroyer$=new k.x}ngOnInit(){this.getUserList()}ngOnDestroy(){this.destroyer$.next(),this.destroyer$.complete()}getTaskList(n){const s={...n};this.taskService.getTaskList(s).pipe((0,x.R)(this.destroyer$)).subscribe(a=>{const l=a;Object.keys(l).forEach(m=>{this.taskListArr.map((Y,B)=>{Y.dataType===m&&(this.taskListArr[B].text=l[m].length?l[m].sort((E,j)=>E.t_status-j.t_status):null)})})})}onClientChange(n){const s={uid:n.value,month:h(new Date).format("MMM-yyyy")};this.username.setValue(n.value),this.getTaskList(s)}getUserList(){this.taskService.userList({}).pipe((0,x.R)(this.destroyer$)).subscribe(n=>{this.users=n;const s=JSON.parse(localStorage.getItem("loginUser")),a=this.users.find(l=>l.id===s.user_id);this.username.setValue(a.id),this.getTaskList({uid:a.id,month:h(new Date).format("MMM-yyyy")})})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(y.R),t.Y36(M.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-task-list"]],decls:9,vars:3,consts:[[1,"w-full"],[1,"flex","flex-col","px-6","pt-6"],["for","status",1,"text-xl"],["appearance","none","id","status",1,"w-36"],["placeholder","Select User","disableOptionCentering","",1,"text-lg","text-gray-500",3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","w-full","p-6","sm:p-6","flex-wrap","h-fit","task-lists"],["class","flex-1 mx-2 bg-white rounded-md drop-shadow-lg  mb-3",4,"ngFor","ngForOf"],[3,"value"],[4,"ngIf","ngIfElse"],["nousername",""],[1,"flex-1","mx-2","bg-white","rounded-md","drop-shadow-lg","mb-3"],[1,"relative","overflow-hidden"],[1,"mb-4","text-xl","font-bold","py-3","px-2","text-center"],[1,"absolute","bottom-0","right-0","w-18","h-18","-m-6"],["svgIcon","heroicons_outline:check-circle"],[4,"ngFor","ngForOf"],[3,"class",4,"ngIf"],[1,"flex","flex-auto","flex-col","px-4","py-3","mb-4"],[1,"flex"],["mat-icon-button",""],[3,"svgIcon"],[1,"ml-2"],["class","text-sm",4,"ngIf"],[1,"items-center","justify-end","flex-wrap","icon-list","mb-2","px-3",3,"click"],["target","_blank",3,"href"],["src","assets/images/logo/logo.png","alt","logo",1,"h-auto","w-12"],["target","_blank",3,"href",4,"ngIf"],[1,"text-sm"],["src","assets/images/logo/bespoke.png","alt","bespoke",1,"h-auto","w-8"],["src","assets/images/logo/dext.png","alt","dext",1,"h-auto","w-9"],["src","assets/images/logo/ltd.png","alt","ltd",1,"h-auto","w-8"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Select User"),t.qZA(),t.TgZ(4,"mat-form-field",3)(5,"mat-select",4),t.NdJ("selectionChange",function(l){return s.onClientChange(l)}),t.YNc(6,A,4,3,"mat-option",5),t.qZA()()(),t.TgZ(7,"div",6),t.YNc(8,N,7,6,"div",7),t.qZA()()),2&n&&(t.xp6(5),t.Q6J("formControl",s.username),t.xp6(1),t.Q6J("ngForOf",s.users),t.xp6(2),t.Q6J("ngForOf",s.taskListArr))},dependencies:[v.sg,v.O5,g.JJ,u.KE,O.gD,L.ey,g.oH,f.Hw,d.lW],styles:[".task-lists[_ngcontent-%COMP%]   .priority_gray_low[_ngcontent-%COMP%]{background:rgba(128,128,128,.1490196078)}.task-lists[_ngcontent-%COMP%]   .priority_gray_high[_ngcontent-%COMP%]{background:rgba(128,128,128,.3607843137)}.task-lists[_ngcontent-%COMP%]   .priority_yellow_high[_ngcontent-%COMP%]{background:#E0D2C2}.task-lists[_ngcontent-%COMP%]   .priority_yellow_low[_ngcontent-%COMP%]{background:rgba(224,210,194,.3215686275)}.task-lists[_ngcontent-%COMP%]   .priority_orange_high[_ngcontent-%COMP%]{background:rgba(229,204,195,.7490196078)}.task-lists[_ngcontent-%COMP%]   .priority_orange_low[_ngcontent-%COMP%]{background:rgba(229,204,195,.2901960784)}.task-lists[_ngcontent-%COMP%]   .priority_pink_high[_ngcontent-%COMP%]{background:rgba(230,197,210,.7607843137)}.task-lists[_ngcontent-%COMP%]   .priority_pink_low[_ngcontent-%COMP%]{background:rgba(230,197,210,.3411764706)}.task-lists[_ngcontent-%COMP%]   .priority_green_high[_ngcontent-%COMP%]{background:rgba(196,216,204,.6117647059)}.task-lists[_ngcontent-%COMP%]   .priority_green_low[_ngcontent-%COMP%]{background:rgba(196,216,204,.2784313725)}.list-item[_ngcontent-%COMP%]:hover   .icon-list[_ngcontent-%COMP%]{display:flex!important}.list-item[_ngcontent-%COMP%]:hover   .icon-list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2){margin:0 4px}.list-item[_ngcontent-%COMP%]:hover   .icon-list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3){margin-right:4px}.icon-list[_ngcontent-%COMP%]{display:none}.text-pink-800[_ngcontent-%COMP%]{color:#9d174d}.text-orange-800[_ngcontent-%COMP%]{color:#9a3412}"],data:{animation:[(0,r.X$)("myTrigger",[(0,r.SB)("fadeInFlash",(0,r.oB)({opacity:"1"})),(0,r.eR)("void => *",[(0,r.oB)({opacity:"0",transform:"translateY(20px)"}),(0,r.jt)("500ms")])])]}}),o})()}];let Q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[_.Bz.forChild($),_.Bz]}),o})(),F=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[T.m,f.Ps,C.vi,d.ot,u.lN,Q]}),o})()}}]);